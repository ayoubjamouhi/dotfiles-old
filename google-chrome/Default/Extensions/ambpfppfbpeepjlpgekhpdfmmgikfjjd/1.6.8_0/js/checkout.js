function _init(){chrome.storage.local.get("city",function(a){city=a.city}),setTimeout(function(){chrome.storage.local.get("shipping",function(a){var b=a.shipping;if(_check())_init();else{if(ez("contactPerson").value=b.first_name+" "+b.last_name,ez("email").value=b.email,ez("address").value=b.address_1,ez("address2").value=b.address_2,ez("country").value=b.country,ez("country").dispatchEvent(new Event("change")),ez("phoneArea")&&(ez("phoneArea").value=b.postcode),ez("zip").value=b.postcode,ez("province").value=b.state,b.override_phone){var c=b.override_phone.split(" ");c.length>0&&(ez("mobileNo").value=c[1],ez("phoneNumber")&&(ez("phoneNumber").value=c[1]),console.log(c[1]),_phonecode(c[0]))}else b.phone?(ez("mobileNo").value=b.phone,ez("phoneNumber")&&(ez("phoneNumber").value=b.phone)):ez("mobileNo").value=123456789;ez("contactPerson").value=b.first_name+" "+b.last_name,b.state?_state():ezusy.querySelector(".ezusy-box-message").innerHTML='<span style="color:red;">Error. Please add it manually! If you applied address, click next</span><br><button class="btn btn-deafault check_confirm" onclick="">Next</button>',b.city?_city():ezusy.querySelector(".ezusy-box-message").innerHTML='<span style="color:red;">Error. Please add it manually! If you applied address, click next</span><br><button class="btn btn-deafault check_confirm" onclick="">Next</button>'}})},1e3)}function _state(){setTimeout(function(){chrome.storage.local.get("shipping",function(a){var b=document.querySelector(".sa-province-wrapper select"),c=a.shipping.state;""==b.value||b.value!=c?0==$(b).find("option").length?ez("province").value=c:(b.value=c,b.dispatchEvent(new Event("change"))):_state()})},1e3)}function _city(){setTimeout(function(){chrome.storage.local.get("shipping",function(a){var b=document.querySelector(".sa-city-wrapper select"),c=document.querySelector(".sa-province-wrapper select"),d=a.shipping.state;""==b.value||b.value!=city&&c.value==d?(0==$(b).find("option").length?ez("city").value=city:($(b).find("option").each(function(){$(this).text().toLowerCase()==city.toLowerCase()&&(city=$(this).text())}),b.value=city,b.dispatchEvent(new Event("change"))),checkout()):_city()})},2e3)}function _phonecode(a){a&&setTimeout(function(){ez("phoneCountry").value!=a?ez("phoneCountry").value=a:_phonecode()},1e3)}function ez(a){return document.querySelector('[name="'+a+'"]')}function _check(){var a="";return ez("address")||(a="address"),ez("address2")||(a="address2"),ez("country")||(a="country"),ez("city")||(a="city"),ez("zip")||(a="zip"),ez("province")||(a="province"),!ez("phoneCountry")&&ez("phoneCountry").value&&(a="phoneCountry"),!ez("mobileNo")&&ez("mobileNo").value&&(a="mobileNo"),ez("contactPerson")||(a="contactPerson"),t&&""==a&&!click&&(click=!0,t.click(),a=1),a}function checkout(){chrome.storage.local.get("shipping",function(a){var b=document.querySelector(".sa-city-wrapper select"),c=document.querySelector(".sa-province-wrapper select"),d=a.shipping.state;setTimeout(function(){ez("province").value==d||c.value==d?b.value!=city&&ez("city").value!=city||(confirm.click(),chrome.storage.local.set({check_out:!1,confirm_step:!0})):checkout()},1e3)})}function check_confirm(){confirm.click(),chrome.storage.local.set({check_out:!1,confirm_step:!0})}var vars={},parts=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,b,c){vars[b]=c});tuan=!0;var ezusy=document,confirm=ezusy.querySelector(".sa-btn-group .sa-confirm"),click=!1,t=ezusy.querySelector(".sa-operation .sa-edit");chrome.storage.local.get("check_out",function(a){if(a.check_out&&void 0===vars.changeAddress){var b="";b+='<h3 class="ezusy-box-header">Fulfil Orders Automatically</h3>',b+='<h3 class="ezusy-box-notice-head ezusy-finished">1. Add to cart</h3>',b+='<h3 class="ezusy-box-notice-head ezusy-finished">2. Delete address</h3>',b+='<h3 class="ezusy-box-notice-head ezusy-finished">3. Select shipping method</h3>',b+='<h3 class="ezusy-box-notice-head ezusy-current">4. Checkout</h3>',b+='<p class="ezusy-box-message">Adding shipping address...</p>',b+='<h3 class="ezusy-box-notice-head">5. Confirm & Pay</h3>';var c=document.createElement("div");c.className="ezusy-box-notice",c.innerHTML=b,document.body.appendChild(c),_init(),$("body").on("click",".check_confirm",function(){check_confirm()})}}),$(confirm).click(function(){chrome.storage.local.set({check_out:!1,confirm_step:!0})});